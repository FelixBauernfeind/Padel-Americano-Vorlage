<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Americano Vorlage â€“ Padelzone</title>

<style>
* {
  box-sizing: border-box; /* ðŸ”‘ verhindert Ãœberlaufen */
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI";
  background:#f5f5f7;
  margin:0;
  padding:0;
}

/* ===== HEADER ===== */
.header {
  background:#f59e0b;
  padding:14px 20px;
}

.header h1 {
  margin:0;
  font-size:26px;
  font-weight:600;
  color:white;
}

.header p {
  margin:4px 0 0 0;
  font-size:15px;
  color:white;
  opacity:0.95;
}

/* ===== CONTENT ===== */
.content {
  padding:20px;
  max-width:1200px;
  margin:0 auto;
}

.section {
  background:white;
  border-radius:14px;
  padding:18px;
  margin-bottom:22px;
}

label {
  display:block;
  margin-bottom:8px; /* +1â€“2 mm Luft */
  font-weight:500;
}

/* ===== INPUTS ===== */
input {
  width:100%;
  padding:10px;
  font-size:15px;
  border-radius:8px;
  border:1px solid #ccc;
}

/* Anzahl Spieler â€“ bewusst schmal */
#count {
  max-width:80px;
  margin-bottom:18px; /* etwas mehr Luft */
}

/* ===== BUTTONS ===== */
button {
  width:100%;
  padding:12px;
  font-size:16px;
  background:#1d1d1f;
  color:white;
  border:none;
  border-radius:10px;
  cursor:pointer;
  margin-top:14px;
}

/* ===== PLAYER GRID ===== */
.grid {
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap:10px;
  width:100%;
}

/* ===== ROUNDS ===== */
.round {
  margin-bottom:26px;
}

.match {
  display:grid;
  grid-template-columns: 1fr 52px 22px 52px 1fr;
  align-items:center;
  text-align:center;
  gap:8px;
  margin-top:12px;
}

.team {
  font-weight:500;
}

.score {
  text-align:center;
}

/* ===== TABLE ===== */
table {
  width:100%;
  border-collapse:collapse;
}

th, td {
  padding:8px;
  border-bottom:1px solid #ddd;
  text-align:left;
}

/* ===== MOBILE FEINSCHLIFF ===== */
@media (max-width: 600px) {
  .content {
    padding:14px;
  }

  .section {
    padding:14px;
  }

  .match {
    font-size:14px;
  }
}
</style>
</head>

<body>

<!-- ===== HEADER ===== -->
<div class="header">
  <h1>Americano Vorlage</h1>
  <p>Padelzone â€“ Felix Nikolas Bauernfeind</p>
</div>

<div class="content">

  <div class="section">
    <label>Anzahl Spieler</label>
    <input type="number" id="count" value="8" min="4">

    <div class="grid" id="players"></div>

    <button onclick="createPlan()">Spielplan erstellen</button>
  </div>

  <div id="plan"></div>

  <div class="section">
    <button onclick="calculate()">ðŸ”¢ Ergebnisse berechnen</button>
  </div>

  <div class="section">
    <h2>Rangliste</h2>
    <table id="ranking"></table>
  </div>

</div>

<script>
let scores = {};

function renderPlayers() {
  const div = document.getElementById("players");
  div.innerHTML = "";
  const count = parseInt(document.getElementById("count").value);
  for (let i = 1; i <= count; i++) {
    div.innerHTML += `<input id="p${i}" placeholder="Spieler ${i}">`;
  }
}

document.getElementById("count").onchange = renderPlayers;
renderPlayers();

function createPlan() {
  document.getElementById("plan").innerHTML = "";
  scores = {};

  const count = parseInt(document.getElementById("count").value);
  const names = [];

  for (let i = 1; i <= count; i++) {
    const name = document.getElementById("p"+i).value.trim();
    if (name) {
      names.push(name);
      scores[name] = 0;
    }
  }

  let players = [...names];

  for (let r = 1; r < players.length; r++) {
    const round = document.createElement("div");
    round.className = "section round";
    round.innerHTML = `<strong>Runde ${r}</strong>`;

    for (let i = 0; i + 3 < players.length; i += 4) {
      const teamA = [players[i], players[i+1]];
      const teamB = [players[i+2], players[i+3]];

      const match = document.createElement("div");
      match.className = "match";
      match.dataset.teamA = teamA.join("|");
      match.dataset.teamB = teamB.join("|");

      match.innerHTML = `
        <div class="team">${teamA.join(" & ")}</div>
        <input type="number" class="score scoreA">
        <div>:</div>
        <input type="number" class="score scoreB">
        <div class="team">${teamB.join(" & ")}</div>
      `;

      round.appendChild(match);
    }

    document.getElementById("plan").appendChild(round);
    players.splice(1, 0, players.pop());
  }

  updateRanking();
}

function calculate() {
  Object.keys(scores).forEach(p => scores[p] = 0);

  document.querySelectorAll(".match").forEach(match => {
    const teamA = match.dataset.teamA.split("|");
    const teamB = match.dataset.teamB.split("|");

    const a = parseInt(match.querySelector(".scoreA").value);
    const b = parseInt(match.querySelector(".scoreB").value);

    if (!isNaN(a)) teamA.forEach(p => scores[p] += a);
    if (!isNaN(b)) teamB.forEach(p => scores[p] += b);
  });

  updateRanking();
}

function updateRanking() {
  const table = document.getElementById("ranking");
  const sorted = Object.entries(scores).sort((a,b)=>b[1]-a[1]);

  table.innerHTML = "<tr><th>Spieler</th><th>Punkte</th></tr>";
  sorted.forEach(([name, pts]) => {
    table.innerHTML += `<tr><td>${name}</td><td>${pts}</td></tr>`;
  });
}
</script>

</body>
</html>
