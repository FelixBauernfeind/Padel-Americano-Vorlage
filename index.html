<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Americano Vorlage â€“ Padelzone</title>

<style>
* { box-sizing:border-box; }
body { font-family:-apple-system,BlinkMacSystemFont,"Segoe UI"; background:#f5f5f7; margin:0; }
.header { background:#f59e0b; padding:14px 20px; }
.header h1 { margin:0; color:white; font-size:26px; }
.header p { margin:4px 0 0; color:white; opacity:.95; }
.content { padding:20px; max-width:1200px; margin:auto; }
.section { background:white; border-radius:14px; padding:18px; margin-bottom:22px; }
label { display:block; margin-bottom:8px; font-weight:500; }
input { width:100%; padding:10px; border-radius:8px; border:1px solid #ccc; }
#count { max-width:80px; margin-bottom:22px; }
.grid { display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:10px; }
button { width:100%; padding:12px; border:none; border-radius:10px; background:#1d1d1f; color:white; margin-top:14px; }
.round { margin-bottom:26px; }
.match { display:grid; grid-template-columns:1fr 52px 22px 52px 1fr; align-items:center; gap:8px; margin-top:12px; text-align:center; }
.team { font-weight:500; }
.pause { margin-top:10px; font-size:14px; font-style:italic; color:#666; }
table { width:100%; border-collapse:collapse; }
th,td { padding:8px; border-bottom:1px solid #ddd; text-align:left; }
</style>
</head>

<body>

<div class="header">
  <h1>Americano Vorlage</h1>
  <p>Padelzone â€“ Felix Nikolas Bauernfeind</p>
</div>

<div class="content">

<div class="section">
  <label>Anzahl Spieler</label>
  <input type="number" id="count" value="8" min="4">
  <div class="grid" id="players"></div>
  <button onclick="createPlan()">Spielplan erstellen</button>
</div>

<div id="plan"></div>

<div class="section">
  <button onclick="calculate()">ðŸ”¢ Ergebnisse berechnen</button>
</div>

<div class="section">
  <h2>Rangliste</h2>
  <table id="ranking"></table>
</div>

</div>

<script>
let scores={};

function renderPlayers(){
  const d=document.getElementById("players");
  d.innerHTML="";
  for(let i=1;i<=count.value;i++) d.innerHTML+=`<input id="p${i}" placeholder="Spieler ${i}">`;
}
count.onchange=renderPlayers; renderPlayers();

function createPlan(){
  plan.innerHTML=""; scores={};
  const players=[];
  for(let i=1;i<=count.value;i++){
    const n=document.getElementById("p"+i).value.trim();
    if(n){ players.push(n); scores[n]=0; }
  }

  const rounds = Math.ceil((players.length-1));
  let rotation=[...players];

  for(let r=0;r<rounds;r++){
    const round=document.createElement("div");
    round.className="section round";
    round.innerHTML=`<strong>Runde ${r+1}</strong>`;

    let active=[...rotation];
    const pause=[];
    while(active.length%4!==0) pause.push(active.pop());

    for(let i=0;i<active.length;i+=4){
      const A=[active[i],active[i+1]];
      const B=[active[i+2],active[i+3]];
      const m=document.createElement("div");
      m.className="match";
      m.dataset.teamA=A.join("|");
      m.dataset.teamB=B.join("|");
      m.innerHTML=`
        <div class="team">${A.join(" & ")}</div>
        <input class="score scoreA" type="number">
        <div>:</div>
        <input class="score scoreB" type="number">
        <div class="team">${B.join(" & ")}</div>`;
      round.appendChild(m);
    }

    if(pause.length){
      const p=document.createElement("div");
      p.className="pause";
      p.textContent=`Pause: ${pause.join(", ")}`;
      round.appendChild(p);
    }

    plan.appendChild(round);
    rotation.splice(1,0,rotation.pop());
  }
  updateRanking();
}

function calculate(){
  Object.keys(scores).forEach(p=>scores[p]=0);
  document.querySelectorAll(".match").forEach(m=>{
    const A=m.dataset.teamA.split("|"), B=m.dataset.teamB.split("|");
    const a=parseInt(m.querySelector(".scoreA").value);
    const b=parseInt(m.querySelector(".scoreB").value);
    if(!isNaN(a)) A.forEach(p=>scores[p]+=a);
    if(!isNaN(b)) B.forEach(p=>scores[p]+=b);
  });
  updateRanking();
}

function updateRanking(){
  ranking.innerHTML="<tr><th>Spieler</th><th>Punkte</th></tr>";
  Object.entries(scores).sort((a,b)=>b[1]-a[1])
    .forEach(([n,p])=>ranking.innerHTML+=`<tr><td>${n}</td><td>${p}</td></tr>`);
}
</script>

</body>
</html>
